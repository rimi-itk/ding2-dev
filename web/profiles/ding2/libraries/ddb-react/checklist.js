(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{283:function(e,t,a){"use strict";a.r(t);var r=a(16),l=(a(33),a(34),a(56)),i=a.n(l),n=a(4),s=a.n(n),c=a(0),m=a.n(c),o=(a(13),a(2),a(12)),d=a(17),u=a(57),p=a(8),v=a(58),f=a(18),h=a(88),b="retrieved",E="empty",x="initial";function y(e){var t=e.className;return m.a.createElement(o.a,{className:t,br:"0px",mb:"0px",mt:"0px",height:"154px",width:"100px"})}function U(e){var t=e.status,a=e.src,r=e.alt,l=e.coverClassName,i=e.className;return t===x?m.a.createElement(y,{className:l}):t===E?null:m.a.createElement("img",{className:i,src:a,alt:r})}y.defaultProps={className:""},U.defaultProps={status:"initial",src:null,coverClassName:"",className:""};var T=U;function N(e){var t=e.style;return m.a.createElement("div",{className:"ddb-simple-material-skeleton",style:t},m.a.createElement("figure",{className:"ddb-reset"},m.a.createElement(y,null)),m.a.createElement("div",null,m.a.createElement(o.a,{width:"45px",mb:"12px"}),m.a.createElement(o.a,{width:"145px",mb:"12px"}),m.a.createElement(o.a,{width:"95px"})))}function g(e){var t=e.item,a=e.coverSize,r=e.materialUrl,l=e.authorUrl,i=e.coverServiceUrl,n=e.ofText,o=e.className,d=e.dataClass,u=e.style,p=function(e){var t=e.id,a=e.size,r=void 0===a?"default":a,l=e.idType,i=void 0===l?"pid":l,n=e.coverServiceUrl,m=void 0===n?"https://cover.dandigbib.org/api/v2":n,o=Object(c.useState)({status:x}),d=s()(o,2),u=d[0],p=d[1];return Object(c.useEffect)((function(){new h.a({baseUrl:m}).getCover({id:t,size:[r],idType:i}).then((function(e){var t,a,l,i=null==e?void 0:null===(t=e[0])||void 0===t?void 0:null===(a=t.imageUrls)||void 0===a?void 0:null===(l=a[r])||void 0===l?void 0:l.url;p({status:i?b:E,url:i})})).catch((function(){return p({status:E})}))}),[t,r,i,m]),u||{status:E}}({id:t.pid,size:a,coverServiceUrl:i});return m.a.createElement("section",{className:"ddb-simple-material ".concat(o),style:u},p.status!==E&&m.a.createElement("figure",{className:"ddb-simple-material__cover"},m.a.createElement("a",{href:Object(f.a)({text:r,placeholders:{pid:encodeURIComponent(t.pid)}})},m.a.createElement(T,{status:p.status,src:p.url,alt:t.title}))),m.a.createElement("div",{className:"ddb-simple-material__data ".concat(d)},t.type&&m.a.createElement("span",{className:"ddb-simple-material__type"},t.type),m.a.createElement("a",{href:Object(f.a)({text:r,placeholders:{pid:encodeURIComponent(t.pid)}})},m.a.createElement("h2",{className:"ddb-simple-material__title"},t.title)),m.a.createElement("p",{className:"ddb-simple-material__author-year"},t.creators&&m.a.createElement("span",{className:"ddb-simple-material__author"},"".concat(n," "),t.creators.map((function(e,a){return m.a.createElement("span",{key:e},m.a.createElement("a",{href:Object(f.a)({text:l,placeholders:{author:encodeURIComponent(e)}})},e),t.creators[a+1]?", ":" ")}))),t.year&&m.a.createElement("time",{dateTime:t.year,className:"ddb-simple-material__year"},"(",t.year,")"))))}N.defaultProps={style:{}},g.defaultProps={coverSize:"small",ofText:"Af",className:"",dataClass:"",style:{}};var _=g;function w(e,t){return m.a.createElement(v.a,{key:t,aside:m.a.createElement(o.a,{width:"136px",height:"50px"})},m.a.createElement(N,null))}function S(e){var t=e.status,a=e.items,r=e.onRemove,l=e.materialUrl,i=e.authorUrl,n=e.coverServiceUrl,s=e.removeButtonText,c=e.emptyListText,f=e.errorText,h=e.ofText;return"initial"===t?m.a.createElement(u.a,null,Object(o.b)(4).map(w)):"failed"===t?m.a.createElement(p.a,{type:"assertive",variant:"warning",message:f}):"ready"===t&&0===a.length?m.a.createElement(p.a,{type:"polite",message:c}):m.a.createElement(u.a,null,a.map((function(e){return m.a.createElement(v.a,{key:e.pid,aside:m.a.createElement(d.a,{className:"ddb-checklist__button",variant:"charcoal",align:"center",onClick:function(){return r(e.pid)}},s)},m.a.createElement(_,{item:e,coverSize:"small",materialUrl:l,authorUrl:i,coverServiceUrl:n,ofText:h,dataClass:"ddb-checklist__data"}))})))}S.defaultProps={items:[],status:"initial"};var k=S,j=a(47),C=a(46),O=a(89);function L(e){var t=e.materialListUrl,a=e.materialUrl,r=e.authorUrl,l=e.coverServiceUrl,n=e.removeButtonText,o=e.emptyListText,d=e.errorText,u=e.ofText,p=Object(c.useState)([]),v=s()(p,2),f=v[0],h=v[1],b=Object(c.useState)("initial"),E=s()(b,2),x=E[0],y=E[1];function U(e){return e&&e.length?(new C.a).getWork({pids:e,fields:["dcTitleFull","pid","dcCreator","creator","typeBibDKType","date"]}):[]}function T(e){y("ready"),h(e.map(O.a.format))}function N(){y("failed")}return Object(c.useEffect)((function(){new j.a({baseUrl:t}).getList().then(U).then(T).catch(N)}),[t]),m.a.createElement(k,{status:x,items:f,onRemove:function(e){var a=i()(f);function r(){y("ready"),h(a)}h(f.filter((function(t){return t.pid!==e}))),new j.a({baseUrl:t}).deleteListMaterial({materialId:e}).catch((function(){y("failed"),setTimeout(r,2e3)}))},materialUrl:a,authorUrl:r,coverServiceUrl:l,removeButtonText:n,emptyListText:o,errorText:d,ofText:u})}L.defaultProps={materialListUrl:"https://test.materiallist.dandigbib.org",removeButtonText:"Fjern fra listen",emptyListText:"Listen er tom",errorText:"Noget gik galt",ofText:"Af"};var z=L;Object(r.a)({appName:"checklist",app:z})}},[[283,1,0]]]);
//# sourceMappingURL=checklist.js.map