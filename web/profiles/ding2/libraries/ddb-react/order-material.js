(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{285:function(e,t,a){"use strict";a.r(t);var n=a(16),i=(a(162),a(4)),r=a.n(i),s=a(0),c=a.n(s),l=(a(2),a(13),a(17)),o=a(90),u=a(8),p=a(32),d=a(18);function g(e){var t=e.status,a=e.checkingText,n=e.progressText,i=e.unavailableText,g=e.invalidPickupBranchText,f=e.onClick,m=e.text,h=e.errorText,k=e.successText,v=e.successMessage,x=e.loginUrl,b=e.materialIds,T=Object(s.useState)(!0),w=r()(T,2),E=w[0],y=w[1];switch(t){case"initial":return null;case"checking":return c.a.createElement(u.a,{message:a,type:"polite",variant:"info"});case"unavailable":return c.a.createElement(u.a,{message:i,type:"polite",variant:"info"});case"invalid branch":return c.a.createElement(u.a,{message:g,type:"polite",variant:"warning"});case"processing":return c.a.createElement(u.a,{message:n,type:"polite",variant:"info"});case"finished":return c.a.createElement(c.a.Fragment,null,c.a.createElement(u.a,{message:k,type:"polite",variant:"success"}),c.a.createElement(o.a,{label:"Tilføj søgning til liste",showCloseButton:!0,dropDown:!0,isOpen:E,onDismiss:function(){return y(!1)}},c.a.createElement(u.a,{message:v,type:"polite",variant:"blank"})));case"failed":return c.a.createElement(u.a,{message:h,type:"polite",variant:"warning"});default:return c.a.createElement("div",{className:"ddb-order-material__container"},c.a.createElement(l.a,{href:p.a.isAuthenticated()?void 0:Object(d.a)({text:x,tags:{id:encodeURIComponent(b.first)}}),variant:"black",align:"left",onClick:f},m))}}g.defaultProps={status:"initial"};var f=g,m=a(46);function h(e){return"string"==typeof e?e.split(","):e}function k(e){var t=e.text,a=e.successText,n=e.successMessage,i=e.errorText,l=e.checkingText,o=e.progressText,u=e.unavailableText,d=e.invalidPickupBranchText,g=e.ids,k=e.loginUrl,v=e.pickupBranch,x=e.expires,b=Object(s.useState)("initial"),T=r()(b,2),w=T[0],E=T[1];return Object(s.useEffect)((function(){var e=new m.a;E("checking"),e.canBeOrdered(h(g)).then((function(t){t?p.a.isAuthenticated()?e.getBranch(v).then((function(e){"1"!==e.willReceiveIll?E("invalid branch"):E("ready")})).catch((function(){E("failed")})):E("ready"):E("unavailable")})).catch((function(){E("failed")}))}),[g,v]),c.a.createElement(f,{text:t,errorText:i,successText:a,successMessage:n,checkingText:l,progressText:o,unavailableText:u,invalidPickupBranchText:d,status:w,onClick:function(){E("processing"),(new m.a).orderMaterial({pids:h(g),pickupBranch:v,expires:x}).then((function(){E("finished")})).catch((function(){E("failed")}))},loginUrl:k,materialIds:h(g)})}k.defaultProps={text:"Bestil materiale",checkingText:"Undersøger mulighed for fjernlån",progressText:"Bestiller materiale",unavailableText:"Kan ikke fjernlånes",invalidPickupBranchText:"Dit afhentningsbibliotek modtager ikke fjernlån",errorText:"Det lykkedes ikke at bestille materialet.",successText:"Materialet er bestilt",successMessage:"Materialet er bestilt, dit bibliotek vil give besked når det er klar til afhentning."};var v=k;Object(n.a)({appName:"order-material",app:v})}},[[285,1,0]]]);
//# sourceMappingURL=order-material.js.map